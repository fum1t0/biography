# 職務経歴書

2022/08/05 現在  
小中　史人

## 目次

- [職務経歴書](#職務経歴書)
  - [目次](#目次)
  - [職務経歴](#職務経歴)
    - [2017年4月〜　ヤフー株式会社](#2017年4月ヤフー株式会社)
  - [テクニカルスキル](#テクニカルスキル)
  - [自己PR](#自己pr)

## 職務経歴

### 2017年4月〜　ヤフー株式会社

未経験の新卒として入社し、正社員として EC サービスの開発運用を担当。  
現在は SRE としてサービスの安定稼働に関する業務を行っています。

<table>
  <tr>
    <th>期間</th>
    <th>プロジェクト概要</th>
    <th>技術スタック</th>
    <th>ロール</th>
  </tr>
  <tr>
    <td>2017/10 ~ 2019/03</td>
    <td>
      <b>広告配信システムの保守運用</b><br/><br/>
      【プロジェクト概要】<br/>
      EC サービス内で外部広告配信サービスに広告出稿するためのシステムの保守運用を担当しました。<br/><br/>
      【担当フェーズ】<br/>
      詳細設計、開発、テスト、運用<br/><br/>
      【業務内容】<br/>
      <ul>
        <li>新機能追加時の改修、単体・結合テスト</li>
        <li>ビジネスサイドからの問い合わせ対応</li>
        <li>運用</li>
      </ul><br/>
      【実績・取り組み】<br/>
      <ul>
        <li>連絡に対して迅速なリアクションを心掛け、タスクを認識・着手していることが相手に伝わるように心掛けました。</li>
        <li>他メンバーの作業が溜まっているときに積極的にタスクを取り、チームの負荷分散に貢献しました。</li>
        <li>細かなところまで注意して業務することを心掛けており、真っ先に他コンポーネントの不具合とその原因に気づき、迅速な復旧に貢献しました。</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>Linux</li>
        <li>PHP 5.6</li>
        <li>FuelPHP</li>
        <li>Node.js v8</li>
        <li>Express</li>
        <li>Oracle</li>
      </ul>
    </td>
    <td>
      開発運用メンバー
    </td>
  </tr>
  <tr>
    <td>2018/04 ~ 2019/03</td>
    <td>
      <b>汎用配信システムの新規開発</b><br/><br/>
      【プロジェクト概要】<br/>
      EC アプリのトップをはじめ、様々な出面での訴求をユーザごとにパーソナライズするための PJ。本 PJ では開発担当を務めました。<br/><br/>
      【担当フェーズ】<br/>
      詳細設計、開発、テスト、運用<br/><br/>
      【業務内容】<br/>
      <ul>
        <li>API の開発、単体・結合テスト、パフォーマンステスト</li>
      </ul><br/>
      【実績・取り組み】<br/>
      <ul>
        <li>スケジュールが決まっている中で慣れない技術を採用したため、有識者に適宜アドバイスを求め、スケジュールに遅延が発生しないよう心掛けました。</li>
        <li>担当箇所の状況がクリアになるよう、PLへの課題や進捗の迅速な共有を心掛けました。</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>PaaS</li>
        <li>Java 8</li>
        <li>Spring Boot</li>
        <li>JUnit</li>
        <li>Cassandra</li>
      </ul>
    </td>
    <td>
      開発メンバー
    </td>
  </tr>
  <tr>
    <td>2019/04 ~ 2020/03</td>
    <td>
      <b>顧客ターゲティングシステムの刷新</b><br/><br/>
      【プロジェクト概要】<br/>
      顧客ターゲティングシステムを PHP から Java へ移植しつつ、機能整理を行う PJ。異動時には設計は固まっていたため、開発からの参画。PJ メンバーの過半数が退職する中、リリースに大きく貢献しました。<br/><br/>
      【担当フェーズ】<br/>
      開発、単体テスト、パフォーマンステスト<br/><br/>
      【業務内容】<br/>
      <ul>
        <li>ターゲティング対象顧客アップロードツールの開発</li>
        <li>API の開発、単体テスト</li>
        <li>Batch の開発、単体テスト</li>
        <li>マイクロサービスを結合してのパフォーマンステスト</li>
        <li>進捗・スケジュール管理</li>
      </ul><br/>
      【実績・取り組み】<br/>
      <ul>
        <li>Kubernetes 上で Locust を動作させ、パフォーマンステスト環境を構築しました。</li>
        <li>
          1 人 1 マイクロサービス担当なのに 5 人中 3 人が退職し、少なくとも 3 サービスはコードの詳細がわからないという状況の中でパフォーマンステストとチューニングを実施しました。99%ile レイテンシが 200 ms 以内という要件を満たせていませんでしたが、FlameGraph を利用し時間がかかっている処理を特定。その周辺のデータ構造を見直すことで 99%ile レイテンシを 90 ms 程度に短縮し、リリースと顧客体験に大きく貢献しました。
        </li>
        <li>パフォーマンス評価フェーズにPLが退職したため、クライアントとの調整を含めたスケジュール管理とメンバーの進捗管理を後継として担当しました。</li>
        <li>
          プロダクションレディマイクロサービスに記されていたプロダクションレディなドキュメントを参考にドキュメンテーションを行いました。結果として、2 年連続で新しくジョインした未経験の新卒が開発環境について他のメンバーに質問することはなく、案件の仕様確認と実装に集中することができていました。
        </li>
      </ul>
    </td>
    <td>
      <ul>
        <li>PaaS</li>
        <li>Kubernetes</li>
        <li>Java 8</li>
        <li>Spring Boot</li>
        <li>Spring Batch</li>
        <li>Node.js v10</li>
        <li>Nuxt.js</li>
        <li>JUnit</li>
        <li>Cassandra</li>
      </ul>
    </td>
    <td>
      開発メンバー。<br/>
      PJ のリーダーが退職してからはリリースまでリーダー代行を担当。
    </td>
  </tr>
  <tr>
    <td>2020/04 ~ 2021/03</td>
    <td>
      <b>セール時負荷対策</b><br/><br/>
      【プロジェクト概要】<br/>
      EC サービスなので折に触れてセールを開催しています。サービスの特性上セール時には通常時よりも遥かに高い負荷に対する対策推進PJ。本 PJ では各システムの負荷対策のレビュー・進捗管理と役職者を含めたステークホルダとのコミュニケーションを担当しました。また、安定化のため想定負荷への対策だけでなく、流れてくる負荷を減らすアプローチを提案・推進しました。<br/><br/>
      【担当フェーズ】<br/>
      事前準備、ステークホルダーとのコミュニケーション、当日のインシデント対応の指揮<br/><br/>
      【業務内容】<br/>
      <ul>
        <li>各システムへのキャパシティプランニング、負荷対策ヒアリング</li>
        <li>部門長、本部長への負荷対策機能の提案</li>
        <li>負荷対策導入の全体スケジュール管理</li>
        <li>当日のインシデント対応の指揮</li>
      </ul><br/>
      【実績・取り組み】<br/>
      <ul>
        <li>
          サービスのコアとなるシステムはありとあらゆる箇所からリクエストされており、サービス全体の機能停止のリスクを抱えていました。そこでユーザ訴求のための各モジュールの成績を集計し、流通総額に対してほぼ貢献していないモジュール群を本部長に対して提示し、サービスアウトの許可を頂きました。サービスインさせたままのモジュールの一部についてもコアシステムに対してのリクエストを大幅に減らしつつ軽微な機能劣化で済むようにステークホルダを巻き込んで調整しました。結果としてキャパシティ 150000 rps に対して合計で 50000 rps ほどのリクエストを減らしました。当日そのコアシステムには最大で 85000 rps 程のリクエストがあり、サービス全ダウンのリスク回避に大きく貢献しました。
        </li>
        <li>
          セール当日に大規模な障害が発生し、インシデント指揮を行いました。システム担当は大規模障害を発生させたという事実と上層部からの頻繁な復旧に対する進捗確認のプレッシャーに晒されており、原因調査に集中できる状況ではありませんでした。そこで、私が代わりに上層部とのコミュニケーション役となり担当チームが原因調査に集中できるよう貢献しました。また、担当は不具合を発生させたことによる動揺も原因調査の妨げとなっていたため、原因究明に集中できるよう前向きな言葉をかけ続けた他、システム担当からはアクセスしづらいエンジニアのアサインを調整しました。
        </li>
        <li>
          セール時の大規模障害を受け、コアとなる機能に対して RateLimit の導入を提案し、導入までのスケジュール管理を行いました。本部長に対して「それらの機能は容易にスケールできないことからサービス成長に伴って全てのリクエストを受けるのは不可能であるため、一定の流量を保ったまま全てのユーザが購入できるよう、技術対応だけではなくサービス全体で機能を見直すべきである」という見解を本部長に対して示したところ、納得していただき採用された。結果としてその後のセールでは RateLimit が機能し、ダウンすることなくセールを実施することができました。
        </li>
      </ul>
    </td>
    <td></td>
    <td>
      ディレクション
    </td>
  </tr>
  <tr>
    <td>2020/06 ~ 2021/04</td>
    <td>
      <b>汎用配信システムの刷新</b><br/><br/>
      【プロジェクト概要】<br/>
      2018 年に開発したプロダクトがクライアントのニーズにあっていないため利用されていない、ユーザ訴求モジュールの出面毎の重複開発による工数肥大化という 2 点の課題に対してソリューションを提案し、ユーザへの新機能提供のオーバーヘッドを大幅に短縮することを狙いました。仕様整理からテスト、導入までをほぼ 1 人で担当しました。<br/><br/>
      【担当フェーズ】<br/>
      要件定義、設計、開発、機能テスト、パフォーマンステスト<br/><br/>
      【業務内容】<br/>
      <ul>
        <li>ユースケースのヒアリング</li>
        <li>API の設計、開発、テスト</li>
        <li>導入先システム担当とのテスト、リリーススケジュールの調整</li>
      </ul><br/>
      【実績・取り組み】<br/>
      <ul>
        <li>
          クライアントに実際に利用されるものにするため、ディレクションにユースケースのヒアリングを行いました。実現が困難な要求に対しては異なる手段で同等の要求が実現できることをクライアントに伝え、合意を得ました。また、汎用配信を実現するために既存の様々なモジュールを洗い出し、デザイナーからモジュールの要素についてヒアリングを行うことでモジュールとその要素を抽象化した上でインターフェースに落とし込みました。落とし込んだインターフェースはシステムとして使いづらくないか、拡張性に懸念はないかをクライアントシステム担当者に念入りに確認しました。
        </li>
        <li>
          真の要求は工数短縮ではなく新機能のサービスインまでのオーバーヘッド短縮であるため、ハイパフォーマンスかつ任意の人が容易に開発できる設計を検討しました。具体的な取り組みは以下になります。
           <ul>
            <li>
              高いスループット要求と複数の外部通信の必要性が明確でした。この場合はイベント駆動方式である WebFlux の方がハイパフォーマンスを期待できますが、サービスに WebFlux が浸透していないため、多くの人が容易に開発できる点を重視して従来のスレッド駆動方式である Jetty を選択しました。スレッドドリブンでスループットを向上させるためにサーバのスレッドをデフォルト値より多くしました。また、非同期通信用のインターフェースを提供し、別で確保しているスレッドプールで非同期通信を処理させるようにした他、同一の通信先へのリクエストは 1 回で済ませるように集約する実装を行いました。これらの実装によりレイテンシの劣化のリスクを抑えつつ実装者は特に注意を払うことなく通信の宣言を記述することが可能になりました。
            </li>
            <li>
              どこに何を出すかという仕組みを意識することなく対象の機能だけの実装で済むようにパイプラインの中で interface を通して実行する方式を採用しました。これにより実装者は interface の実装にビジネスロジックを書き、その後機械的にその実装を割り当てる処理を記述するだけで動作するようになっています。この判断を行ったことでコードとしての重複は多数存在することになりますが、特定の要求による改修によって他の機能に影響が出るのを防ぐため、意図的にコードの重複を採用しています。
              <ul>
                <li>パイプラインと interface の多用を採用したことでコードの見通しがよく、引き継ぎもスムーズに行うことができました。</li>
              </ul>
            </li>
            <li>
              外部通信の実装も実装者によってばらつくのを避けるために実装を共通化したことで、実装者が意識せずにエラーハンドリングとメトリクス計測を実現しているだけでなく、サーキットブレーカーも動作させることができています。
            </li>
            <li>
              多くの人が開発するという性質上実装者によってコードのフォーマットが変わるのが懸念されたため、pre-commit によるコードフォーマットを導入しました。
            </li>
           </ul>
        </li>
        <li>本提案により組織に対して年間で 112 人月の工数削減の貢献を実現しました。加えて、ユーザへの表示速度が 99%ile で 200 ms 程短縮されました。</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>Kubernetes</li>
        <li>Java 11</li>
        <li>Spring Boot</li>
        <li>JUnit</li>
        <li>Cassandra</li>
        <li>Grafana</li>
      </ul>
    </td>
    <td>
      プロジェクトリーダー兼開発。プロジェクトとしては 2 名だったもの、ほぼ全ての工程を 1 人で担当。
    </td>
  </tr>
  <tr>
    <td>2021/04 ~ </td>
    <td>
      <b>注文システムの負荷対策</b><br/><br/>
      【プロジェクト概要】<br/>
      注文情報を利用したユーザへの訴求ニーズはありつつも、あまりにも巨大なテーブルであるために高負荷に耐えられないという課題がありました。そこで CQRS を採用し、クライアントは Oracle のキャッシュとなる Cassandra を参照するようにする PJ のリーダーとして 2 名のメンバーと共に業務に取り組んでいます。本 PJ により Oracle の安定化とクライアントの大幅なパフォーマンス改善を狙っています。<br/><br/>
      【担当フェーズ】<br/>
      要件定義、設計、開発、機能テスト、パフォーマンステスト<br/><br/>
      【業務内容】<br/>
      <ul>
        <li>要件整理とスケジュール策定</li>
        <li>技術選定</li>
        <li>API, Consumer の仕様整理、設計</li>
        <li>メトリクスの実装とダッシュボードの整備</li>
      </ul><br/>
      【実績・取り組み】<br/>
      <ul>
        <li>新たに注文情報を参照できるシステムができると耳にした人たちから多数の要望が寄せられましたが、本来の課題のスコープを大幅に超える要求を全て棄却し、必要な機能のみにフォーカスしました。</li>
        <li>古いデータで最新のデータを上書きしてしまうことによる Oracle と Cassandra とのデータ不整合と複雑な整合性管理を避けるため、MQ には更新内容の詳細は送らず、更新対象のキーのみを送り、都度 Oracle から処理時点で最新のデータを取得。それを Cassandra に書き込む方式を採用することで先祖返りが発生しないようにしました。これにより MQ で対象を連携しさえすればデータは最新化されるというシンプルな構成になっています。</li>
        <li>メンバーのレベルアップのため、私が実装しないように心掛けていました。具体的には、実装の詳細についてはメンバーに委譲し、気になる点のみレビュー時に指摘するようにしていました。</li>
        <li>意図的に特定の方向のみに拡張しやすい構成を採用しました。ジョイン先は様々な案件による改修依頼と厳しいスケジュール要求から歪な形での拡張が行われることが多く、注文を軸とした操作以外の実現を極めて困難にしています。これにより私が担当を離れた場合もパフォーマンスやスケーラビリティが損なわれにくいと考えています。</li>
        <li>要求を厳選し、スコープを区切ることで上層部からのスケジュール要求に対して余裕を持ってリリースすることができました。</li>
        <li>パフォーマンステストのシナリオを設計する際に実際に保持するデータのサイズと実際にリクエストされたデータを Oracle と EDW 上のアクセスログを活用して分析し、実際のワークロードを限りなく再現しました。結果としてセール時の高負荷でも安定稼働を実現しています。</li>
        <li>本 PJ の開発物により、切替前はレスポンスタイムが平均 500 ms であったものが、99%ile で 50 ms に短縮され、ユーザ体験の向上、クライアントシステムのパフォーマンス改善に大きく貢献しました。</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>Kubernetes</li>
        <li>Envoy</li>
        <li>Kotlin</li>
        <li>Spring Boot</li>
        <li>Reactor</li>
        <li>Spring Batch</li>
        <li>JUnit</li>
        <li>Node.js v14</li>
        <li>TypeScript</li>
        <li>Express</li>
        <li>MQ (Pulsar)</li>
        <li>Cassandra</li>
        <li>Grafana</li>
      </ul>
    </td>
    <td>
      プロジェクトリーダー兼 SRE
    </td>
  </tr>
  <tr>
    <td>2022/05 ~ 2022/08</td>
    <td>
      <b>商品入稿システムのパフォーマンスチューニング</b><br/><br/>
      【プロジェクト概要】<br/>
      スケジュール死守の炎上 PJ でスループットが出ない、OutOfMemory が頻発するといった事象が発生していたため、パフォーマンス・チューニングを行いました。<br/><br/>
      【担当フェーズ】<br/>
      パフォーマンステスト、リリース準備<br/><br/>
      【業務内容】<br/>
      <ul>
        <li>スループットの向上</li>
        <li>メモリリークの解消</li>
        <li>メトリクスの導入</li>
        <li>リファクタリング</li>
      </ul><br/>
      【実績・取り組み】<br/>
      <ul>
        <li>
          以下の理由からリポジトリ内のコードを全て WebFlux に書き換えました。これによりスループットが 500 rps から 2000 rps に改善され、OutOfMemory が解消されました。
          <ul>
            <li>コアとなる業務ロジックは特定のパッケージ内に丁寧に整理されていた。</li>
            <li>Java における gRPC はパフォーマンスの観点から non-blocking I/O を推奨しているが、blocking になっていた。</li>
            <li>blocking I/O を非同期処理として宣言する歪な実装になっていた。</li>
          </ul>
        </li>
        <li>
          チューニング対象の機能はロジックが全てコントローラに記載されていたため、可読性を上げるために適切に分解したり非効率な処理を見直したりするリファクタリングを行いました。
        </li>
        <li>
          リリース間近なのにメトリクスが全く存在していなかったため、I/O に関する %ile メトリクスと実際に流れてきた商品の詳細なデータに関するメトリクスを実装し、ダッシュボードを用意しました。
        </li>
        <li>上記取り組みにより明らかにスケジュールに間に合わなかったところを、スケジュール通りにリリースすることができました。</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>Kubernetes</li>
        <li>Java 11</li>
        <li>Spring Boot</li>
        <li>gRPC</li>
        <li>Grafana</li>
      </ul>
    </td>
    <td>
      SRE
    </td>
  </tr>
</table>

## テクニカルスキル

<table>
  <tr>
    <th colspan="2">技術</th>
    <th>使用期間</th>
    <th>レベル</th>
  </tr>
  <tr>
    <td>OS</td>
    <td>Linux</td>
    <td>2 年</td>
    <td>インストール、環境構築が可能。</td>
  </tr>
  <tr>
    <td rowspan="6">言語</td>
    <td>Java</td>
    <td>5 年</td>
    <td>適切にコードを書くことができ、指導が可能。</td>
  </tr>
  <tr>
    <td>Kotlin</td>
    <td>2 年</td>
    <td>調べながらコードを書くことができる。</td>
  </tr>
  <tr>
    <td>Node.js</td>
    <td>4 年</td>
    <td>調べながらコードを書くことができる。</td>
  </tr>
  <tr>
    <td>TypeScript</td>
    <td>2 年</td>
    <td>調べながらコードを書くことができる。</td>
  </tr>
  <tr>
    <td>Python</td>
    <td>5 年</td>
    <td>
      調べながらコードを書くことができる。<br/>
      設計判断等の意思決定のためにログや EDW から取得したデータを Jupyter Notebook を利用して可視化するために利用。<br/>
      本番稼働しているコードの運用経験はない。
    </td>
  </tr>
  <tr>
    <td>PHP</td>
    <td>2 年</td>
    <td>保守運用で経験したものの、ほぼ触っていない。</td>
  </tr>
  <tr>
    <td rowspan="4">フレームワーク</td>
    <td>Spring Boot</td>
    <td>5 年</td>
    <td></td>
  </td>
  <tr>
    <td>Express</td>
    <td>3 年</td>
    <td></td>
  </tr>
  <tr>
    <td>Nuxt.js</td>
    <td>半年</td>
    <td></td>
  </tr>
  <tr>
    <td>FuelPHP</td>
    <td>2 年</td>
    <td></td>
  </tr>
  <tr>
    <td rowspan="2">データベース</td>
    <td>Cassandra</td>
    <td>5 年</td>
    <td>パフォーマンスがでるようなテーブル定義が可能。</td>
  </td>
  <tr>
    <td>Oracle</td>
    <td>2 年</td>
    <td>データ抽出がメイン。</td>
  </tr>
  <tr>
    <td rowspan="6">その他ミドルウェアなど</td>
    <td>Pivotal Web Services</td>
    <td>2 年</td>
    <td></td>
  </td>
  <tr>
    <td>Kubernetes</td>
    <td>3 年</td>
    <td></td>
  </tr>
  <tr>
    <td>Apache Tomcat</td>
    <td>2 年</td>
    <td></td>
  </tr>
  <tr>
    <td>Jetty</td>
    <td>1 年</td>
    <td></td>
  </tr>
  <tr>
    <td>Reactor Netty</td>
    <td>3 年</td>
    <td></td>
  </tr>
  <tr>
    <td>gRPC</td>
    <td>半年</td>
    <td></td>
  </tr>
</table>

## 自己PR

- **コミュニケーションスキル**  
  クライアントのニーズの達成が担保されるよう判断に問題がないか念入りに確認することを心掛けています。  
  またクライアントの要求はそのまま受け入れずに吟味し、技術的に懸念のある要求に対してはクライアントの真の要求を考え、代替もしくは類似のソリューションの提案を行うようにしています。
- **意思決定**  
  全ての意思決定には定量的な根拠がなければならないと考えています。設計判断を始め様々な意思決定を行う際に扱うデータの性質や実際のワークロードなど多角的な観点から可視化を行うことで、提案相手との無駄な議論を避けつつ私の判断に納得してもらえるよう心掛けています。
- **責任感**  
  責任感を持って日々の業務に取り組んでおり、新卒の頃からチームの視座でタスクを認識し、進捗していないタスクのヘルプや巻取りをよく行っていました。  
  またスケジュールコミットに対する意識が強く、スケジュールを守るために以下を心掛けています。
  - そもそも遅れそうなのであれば要件を整理し、交渉する。
  - 自分の技術力で解決できる時間を考慮したバッファを積む。
  - 炎上してしまったのであれば手段を問わずにコミットメントする。
